# read-comfortably

> turns any web page into a clean view for reading.

This module is based on arc90's readability project.

## Example

[Before](https://raw.githubusercontent.com/luin/node-readability/master/examples/before.png) -> [After](https://raw.githubusercontent.com/luin/node-readability/master/examples/after.png)

## Install

```
$ npm install --save read-comfortably
```

## Usage

`read(html [, options], callback)`

Where

  * **html** url or html code.
  * **options** is an optional options object
  * **callback** is the callback to run - `callback(error, article)`

Example
```javascript
var read = require('node-comfortably');

read('http://howtonode.org/really-simple-file-uploads', function(err, article) {
  // Main Article
  console.log(article.content);
  // Title
  console.log(article.title);

  // HTML Source Code
  console.log(article.html);
  // DOM
  console.log(article.document);

  // Description Article
  console.log(article.getDesc(300));

  // Close article to clean up jsdom and prevent leaks
  article.close();
});
```

## Options

read-comfortably will pass the options to [node-jsdom](https://github.com/darrylwest/node-jsdom) directly.
See request lib to view all available options.

read-comfortably has five additional options:

- `preprocess` which should be a function to check or modify downloaded source before passing it to readability.

options.preprocess = callback($, options, callback);
```javascript
read(
  url,
  {
    preprocess: function($, options, callback) {
      if (/* do some thing */) {
        return callback(new Error('/* err msg */'));
      }
      callback(null, $, options);
    }
  },
  function(err, article) {
    //...
  }
);
```

- `nodesToRemove` which allow set your own nodes to remove array for tags.

options.nodesToRemove = array;
```javascript
read(
  url,
  {
    nodesToRemove: [
      'meta',
      'aside',
      'style',
      'object',
      'iframe',
      'script',
      'noscript'
    ]
  },
  function(err, article) {
    //...
  }
);
```

- `considerDIVs` true for turn all divs that don't have children block level elements into p's.

options.considerDIVs = boolean; (default true)
```javascript
read(
  url,
  {
    considerDIVs: true
  },
  function(err, article) {
    //...
  }
);
```

- `nodesToScore` which allow set your own nodes to score array for tags.

options.nodesToScore = array; (default ['p', 'pre'])
```javascript
read(
  url,
  {
    nodesToScore: ['p', 'pre', 'section']
  },
  function(err, article) {
    //...
  }
);
```

- `nodesToAppend` which allow set your own nodes to append array for tags.

options.nodesToAppend = array; (default ['P'])
```javascript
read(
  url,
  {
    nodesToAppend: ['P']
  },
  function(err, article) {
    //...
  }
);

## article object

### content

The article content of the web page.

### title

The article title of the web page. It's may not same to the text in the `<title>` tag.

### html

The original html of the web page.

### dom
The document of the web page generated by jsdom. You can use it to access the DOM directly(for example, `article.document.getElementById('main')`).

### getDesc(length)

The article description of the web page.

## Why not Cheerio

This lib is using jsdom to parser HTML instead of cheerio because some data such as image size and element visibility isn't able to acquire when using cheerio, which will significantly affect the result. 

## Contributors

https://gitlab.com/unrealce/read-comfortably

## Related

- [`is-image-url`](https://www.npmjs.com/package/is-image-url) - Check if a url is an image
- [`log4js`](https://www.npmjs.com/package/log4js) - Port of Log4js to work with node.
- [`node-jsdom`](https://www.npmjs.com/package/node-jsdom) - A JavaScript implementation of the DOM and HTML standards cloned from the original jsdom branch 3.x
- [`string`](https://www.npmjs.com/package/string) - string contains methods that aren't included in the vanilla JavaScript string such as escaping html, decoding html entities, stripping tags, etc.

## License

The MIT License (MIT)

Copyright (c) 2015